<!DOCTYPE html>
<html lang="pt-br">

<head>
	<meta charset="utf-8" />
	<title>Formulário de Inclusão de Conteúdo Programático</title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
	 crossorigin="anonymous">
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
	 crossorigin="anonymous"></script>
	<script>
		function deleteConteudo(obj) {
			let id = obj.id;
			let url = "http://localhost:3000/conteudo/deletar";
			var xhr = new XMLHttpRequest(); //Criei um objeto XMLHttp
			xhr.open("POST", url, true);
			xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
			xhr.send("id=" + id); //Enviei o request
			xhr.onreadystatechange = function () {
				if (xhr.readyState == 4 && xhr.status == 200) {
					// document.getElementById("cidades").innerHTML = xhr.responseText;
					// location.reload(true);
				}
			}
		}
	</script>
</head>

<body>
	<section class="container">
		<section>
			<h2 class="text-center">Formulário para inclusão de conteúdo programático</h2>
			<form action="conteudo/salvar" method="post">
				<div class="form-group">

					<input type="date" name="data" placeholder="Data">
				</div>
				<div class="form-group">

					<input type="text" name="conteudo" placeholder="Conteúdo programático">
				</div>
				<div class="form-group">

					<input type="submit" value="enviar">
				</div>
			</form>
		</section>
		<section>
			<table class="table" id="conteudoProgramatico">
				<tr>
					<td>Id</td>
					<td>Data</td>
					<td>Conteúdo</td>
				</tr>
				<% for(let i=0; i<conteudo.length; i++) {%>
				<tr>
					<td>
						<%= conteudo[i].idconteudoprogramatico %>
					</td>
					<td>
						<%= conteudo[i].data %>
					</td>
					<td>
						<%= conteudo[i].conteudo %>
					</td>
					<td>
						<button id="<%= conteudo[i].idconteudoprogramatico %>" onclick="deleteConteudo(this)">x</button>
					</td>
				</tr>
				<% } %>
			</table>
		</section>
	</section>
</body>

</html>